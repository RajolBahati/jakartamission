<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core">
    <h:head>
        <title>Visite</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"/>
    </h:head>
    <h:body>
        <div class="container mt-5">
            <h1>Selectionner un lieu :</h1>
            
            <h:form id="selectionForm">
                <div class="mb-3">
                    <h:selectOneMenu value="#{lieuBean.selectedLieu}" styleClass="form-select">
                        <f:selectItem itemLabel="-- Choisissez un lieu --" itemValue="#{null}" />
                        <f:selectItems value="#{lieuBean.listeLieux}" var="l" itemValue="#{l.id}" itemLabel="#{l.nom}"/>
                        <f:ajax listener="#{lieuBean.updateWeatherMessage}" render="weatherDisplay"/>
                    </h:selectOneMenu>
                </div>
            </h:form>

            <h:panelGroup id="weatherDisplay" layout="block" class="mt-4 p-3 border rounded bg-light">
                <h:outputText value="Information meteo : " styleClass="fw-bold"/>
                <h:outputText id="weather" value="#{lieuBean.weatherMessage}"/>
            </h:panelGroup>

            <div class="mt-4">
                <h:form id="navForm">
                    <h:commandButton value="Visiter" action="visiter" styleClass="btn btn-primary"/>
                    <h:link outcome="/home" value="Retour Accueil" styleClass="btn btn-secondary ms-2"/>
                </h:form>
            </div>
            
        </div> </h:body>
</html>